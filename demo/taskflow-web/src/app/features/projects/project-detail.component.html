<div class="project-detail-container">
  @if (project()) {
    <div class="header">
      <button mat-icon-button (click)="goBack()">
        <mat-icon>arrow_back</mat-icon>
      </button>
      <h1>{{ project()!.name }}</h1>
      <mat-chip [class.completed]="project()!.isCompleted">
        {{ project()!.isCompleted ? 'Completed' : 'Active' }}
      </mat-chip>
    </div>

    <div class="content-grid">
      <mat-card>
        <mat-card-header>
          <mat-card-title>Project Details</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list>
            <mat-list-item>
              <span matListItemTitle>Description</span>
              <span matListItemLine>{{ project()!.description }}</span>
            </mat-list-item>
            <mat-divider></mat-divider>
            <mat-list-item>
              <span matListItemTitle>Owner</span>
              <span matListItemLine>{{ project()!.ownerId }}</span>
            </mat-list-item>
            <mat-divider></mat-divider>
            <mat-list-item>
              <span matListItemTitle>Status</span>
              <span matListItemLine>{{ project()!.isCompleted ? 'Completed' : 'Active' }}</span>
            </mat-list-item>
          </mat-list>
        </mat-card-content>
        <mat-card-actions>
          @if (!project()!.isCompleted) {
            <button mat-button color="primary">
              <mat-icon>edit</mat-icon>
              Edit Project
            </button>
            <button mat-button color="warn" (click)="completeProject()">
              <mat-icon>check_circle</mat-icon>
              Complete Project
            </button>
          }
        </mat-card-actions>
      </mat-card>

      <mat-card>
        <mat-card-header>
          <mat-card-title>Team Members</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-list>
            @for (member of getTeamMembers(); track member.id) {
              <mat-list-item>
                <mat-icon matListItemIcon>person</mat-icon>
                <span matListItemTitle>{{ member.name }}</span>
                <span matListItemLine>{{ member.role }}</span>
              </mat-list-item>
              <mat-divider></mat-divider>
            }
            @if (getTeamMembers().length === 0) {
              <div class="empty-state">
                <p>No team members assigned yet.</p>
              </div>
            }
          </mat-list>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button color="primary">
            <mat-icon>person_add</mat-icon>
            Add Team Member
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  } @else {
    <div class="loading">
      <p>Loading project details...</p>
    </div>
  }
</div>
